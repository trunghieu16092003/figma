<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../css/global.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../scripts/components/CardProduct.js"></script>
    <script src="../scripts/components/Footer.js"></script>
    <script src="../scripts/components/Header.js"></script>
    <script src="../scripts/components/ProductModal.js"></script>
  </head>

  <body>
    <app-header></app-header>

    <div
      id="wrapper"
      class="relative container mx-auto px-4 sm:px-6 lg:px-8 mt-[97px] md:mt-[120px] mb-5 z-0"
    >
      <div class="mb-5 text-xs">Trang chủ / <span>Áo thu đông nữ</span></div>
      <div>
        <div class="md:flex md:justify-between gap-5">
          <div class="sort md:w-1/5">
            <div
              id="filterOverlay"
              class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden md:hidden"
            ></div>
            <!-- Filter Panel -->
            <div
              id="filterPanel"
              class="fixed top-16 right-0 h-[calc(100vh-64px)] w-4/5 bg-white shadow-lg p-4 z-50 transform translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out md:relative md:shadow-none md:bg-transparent md:p-0 overflow-y-auto overscroll-contain"
            >
              <button
                id="filterClose"
                class="absolute top-4 right-4 text-white bg-[#AD6E23] rounded-full w-8 h-8 flex items-center justify-center z-50 md:hidden"
              >
                <i class="fas fa-times"></i>
              </button>
              <div class="flex justify-between items-center mb-4 md:hidden">
                <h2 class="text-lg font-semibold">Bộ lọc</h2>
              </div>

              <div>
                <!-- Size -->
                <div class="filter-option">
                  <div
                    class="w-full py-5 text-left border-b border-solid border-b-gray-300 font-medium flex justify-between items-center"
                  >
                    Size
                    <span
                      onclick="toggleFilter(this)"
                      class="toggle-icon cursor-pointer"
                      >+</span
                    >
                  </div>
                  <div
                    class="mt-2 pl-2 hidden dropdown-content border-b border-solid border-b-gray-300 pb-3"
                  >
                    <div class="flex gap-2">
                      <span
                        style="border: 1px solid #e1e1e1"
                        class="inline-flex items-center justify-center w-12 h-12 border-4 rounded cursor-pointer transition-all hover:border-black active:border-black"
                        >S</span
                      >
                      <span
                        style="border: 1px solid #e1e1e1"
                        class="inline-flex items-center justify-center w-12 h-12 border rounded cursor-pointer transition-all hover:border-black active:border-black"
                        >M</span
                      >
                      <span
                        style="border: 1px solid #e1e1e1"
                        class="inline-flex items-center justify-center w-12 h-12 border rounded cursor-pointer transition-all hover:border-black active:border-black"
                        >L</span
                      >
                      <span
                        style="border: 1px solid #e1e1e1"
                        class="inline-flex items-center justify-center w-12 h-12 border rounded cursor-pointer transition-all hover:border-black active:border-black"
                        >XL</span
                      >
                      <span
                        style="border: 1px solid #e1e1e1"
                        class="inline-flex items-center justify-center w-12 h-12 border rounded cursor-pointer transition-all hover:border-black active:border-black"
                        >XXL</span
                      >
                    </div>
                  </div>
                </div>

                <!-- Màu sắc -->
                <div class="filter-option">
                  <div
                    class="w-full py-5 text-left border-b border-solid border-b-gray-300 font-medium flex justify-between items-center"
                  >
                    Màu sắc
                    <span
                      onclick="toggleFilter(this)"
                      class="toggle-icon cursor-pointer"
                      >+</span
                    >
                  </div>
                  <div
                    class="mt-2 pl-2 hidden dropdown-content border-b border-solid border-b-gray-300 pb-3"
                  >
                    <div class="mt-4">
                      <label
                        ><input type="checkbox" name="color" value="Đen" />
                        Đen</label
                      >
                    </div>
                    <div class="mt-4">
                      <label
                        ><input type="checkbox" name="color" value="Đỏ" />
                        Đỏ</label
                      >
                    </div>
                    <div class="mt-4">
                      <label
                        ><input type="checkbox" name="color" value="Xanh" />
                        Xanh</label
                      >
                    </div>
                    <div class="mt-4">
                      <label
                        ><input type="checkbox" name="color" value="Xám" />
                        Xám</label
                      >
                    </div>
                    <div class="mt-4">
                      <label
                        ><input type="checkbox" name="color" value="Trắng" />
                        Vàng</label
                      >
                    </div>
                  </div>
                </div>

                <!-- Giá tiền -->
                <div class="pb-5 border-b border-solid border-b-gray-300">
                  <div
                    class="w-full text-left py-5 font-medium border-b border-b-gray-300"
                  >
                    Giá tiền
                  </div>
                  <div class="mt-2 pl-2">
                    <input
                      type="range"
                      min="0"
                      max="2000000"
                      step="50000"
                      value="1000000"
                      id="priceRange"
                      class="custom-range w-full h-2 rounded-lg appearance-none cursor-pointer"
                    />
                    <div class="mt-2">
                      Giá: <span id="priceValue">0</span> VNĐ
                    </div>
                  </div>
                </div>

                <!-- Chất liệu -->
                <div class="filter-option">
                  <div
                    class="w-full py-5 text-left border-b border-solid border-b-gray-300 font-medium flex justify-between items-center"
                  >
                    Chất liệu
                    <span
                      onclick="toggleFilter(this)"
                      class="toggle-icon cursor-pointer"
                      >+</span
                    >
                  </div>
                  <div
                    class="mt-2 pl-2 hidden dropdown-content border-b border-solid border-b-gray-300 pb-3"
                  >
                    <div class="mt-4">
                      <label
                        ><input
                          type="checkbox"
                          name="material"
                          value="cotton"
                        />
                        Cotton</label
                      >
                    </div>

                    <div class="mt-4">
                      <label
                        ><input type="checkbox" name="material" value="len" />
                        Len</label
                      >
                    </div>

                    <div class="mt-4">
                      <label
                        ><input
                          type="checkbox"
                          name="material"
                          value="polyester"
                        />
                        Polyester</label
                      >
                    </div>
                  </div>
                </div>

                <!-- Buttons -->
                <div class="flex justify-between gap-2 pt-4">
                  <button
                    class="bg-[#AD6E23] text-white px-4 py-2 rounded-md w-full"
                  >
                    Lọc
                  </button>
                  <button
                    class="bg-gray-300 text-gray-700 px-4 py-2 rounded-md w-full"
                    type="reset"
                  >
                    Tạo lại
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="md:w-4/5">
            <div class="flex justify-between items-center mb-5">
              <h1 class="text-xl md:text-3xl category-title">Áo thu đông nữ</h1>
              <div class="flex gap-3 items-center">
                <form action="">
                  <select
                    name="sort"
                    id="sort"
                    class="bg-white border border-[#AD6E23] px-4 py-2 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-[#AD6E23] cursor-pointer"
                  >
                    <option value="">Sắp xếp theo</option>
                    <option value="asc">Giá: Từ thấp đến cao</option>
                    <option value="desc">Giá: Từ cao đến thấp</option>
                  </select>
                </form>

                <div class="flex justify-between items-center md:hidden">
                  <button
                    id="filterToggle"
                    class="flex items-center gap-2 text-[#AD6E23] border border-[#AD6E23] px-4 py-2 rounded-md"
                  >
                    <i class="fa-solid fa-filter"></i> Lọc
                  </button>
                </div>
              </div>
            </div>
            <div
              class="card-product-container grid grid-cols-2 md:grid-cols-4 gap-4"
              data-product="product"
            ></div>
            <div
              id="pagination"
              class="flex justify-center items-center space-x-2 mt-4"
            >
              <!-- Nút Previous -->
              <button
                id="prev"
                class="border border-[#AD6E23] px-4 py-2 bg-white text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50"
                disabled
              >
                <i class="fa-solid fa-angles-left"></i>
              </button>

              <!-- Phân trang: Hiển thị số trang cho cả Mobile và Desktop -->
              <button
                class="border border-[#AD6E23] page-number px-4 py-2 text-gray-700 rounded-md cursor-pointer hover:bg-[#AD6E23]/20 hover:text-white active:bg-[#AD6E23]"
              >
                1
              </button>
              <button
                class="border border-[#AD6E23] page-number px-4 py-2 text-gray-700 rounded-md cursor-pointer hover:bg-[#AD6E23]/20 hover:text-white active:bg-[#AD6E23]"
              >
                2
              </button>
              <span class="inline-block px-4 py-2 text-gray-700">...</span>
              <button
                class="border border-[#AD6E23] page-number px-4 py-2 text-gray-700 rounded-md cursor-pointer hover:bg-[#AD6E23]/20 hover:text-white active:bg-[#AD6E23]"
              >
                6
              </button>

              <!-- Nút Next -->
              <button
                id="next"
                class="border border-[#AD6E23] px-4 py-2 bg-white text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50"
              >
                <i class="fa-solid fa-angles-right"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <app-footer></app-footer>
    <div id="product-modal-container"></div>
    <!-- <product-modal></product-modal> -->
  </body>
  <script
    type="module"
    src="../scripts/renderComponent/renderProduct.js"
  ></script>
  <script>
    const filterPanel = document.getElementById("filterPanel");
    const filterToggle = document.getElementById("filterToggle");
    const filterClose = document.getElementById("filterClose");
    const filterOverlay = document.getElementById("filterOverlay");
    const priceRange = document.getElementById("priceRange");
    const priceValue = document.getElementById("priceValue");

    //hien thi dropdown filters
    function toggleFilter(icon) {
      const container = icon.closest(".filter-option");
      const parentElement = icon.closest("div");
      const dropdownContent = container.querySelector(".dropdown-content");

      parentElement.classList.toggle("border-b");
      dropdownContent.classList.toggle("hidden");
      icon.textContent = dropdownContent.classList.contains("hidden")
        ? "+"
        : "−";
    }

    filterToggle?.addEventListener("click", () => {
      filterPanel.classList.remove("translate-x-full");
      filterOverlay.classList.remove("hidden");
    });

    filterClose?.addEventListener("click", () => {
      filterPanel.classList.add("translate-x-full");
      filterOverlay.classList.add("hidden");
    });

    priceRange?.addEventListener("input", () => {
      priceValue.textContent = Number(priceRange.value).toLocaleString();
    });

    function updateRangeBackground(input) {
      const value = ((input.value - input.min) / (input.max - input.min)) * 100;
      input.style.background = `linear-gradient(to right, #AD6E23 0%, #AD6E23 ${value}%, #f6f6f6 ${value}%, #f6f6f6 100%)`;
    }

    priceRange?.addEventListener("input", function () {
      priceValue.textContent = Number(priceRange.value).toLocaleString();
      updateRangeBackground(priceRange);
    });

    if (priceRange) {
      priceValue.textContent = Number(priceRange.value).toLocaleString();
      updateRangeBackground(priceRange);
    }
  </script>
</html>
